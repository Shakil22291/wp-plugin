{"version":3,"file":"auth.js","sources":["auth.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var showAuthBtn = document.querySelector('#mypluging-show-auth-form');\n  var authContainer = document.querySelector('.auth-form-wrapper');\n  var closeBtn = document.querySelector('#myplugin-auth-close');\n  var authForm = document.getElementById('myplugin-auth-form');\n  var status = authForm.querySelector('[data-message=\"status\"]');\n\n  showAuthBtn.addEventListener('click', function () {\n    authContainer.classList.add('show');\n    this.parentElement.classList.add('hide');\n  });\n\n  closeBtn.addEventListener('click', function () {\n    authContainer.classList.remove('show');\n    showAuthBtn.parentElement.classList.remove('hide');\n  });\n\n  authForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n\n    var data = {\n      name: authForm.querySelector('[name=\"username\"]').value,\n      password: authForm.querySelector('[name=\"password\"]').value,\n      nonce: authForm.querySelector('[name=\"myplugin_auth\"]').value\n    };\n\n    if (!data.name || !data.password) {\n      status.innerHTML = 'Missing data';\n      status.classList.add('error');\n      return;\n    }\n\n    // ajax http post request\n    var url = authForm.dataset.url;\n    var params = new URLSearchParams(new FormData(authForm));\n    authForm.querySelector('[name=\"submit\"]').value = 'Logging in..';\n    authForm.querySelector('[name=\"submit\"]').disabled = true;\n\n    fetch(url, {\n      method: 'POST',\n      body: params\n    }).then(function (resolve) {\n      return resolve.json();\n    }).catch(function (error) {\n      resetMessage();\n      alert('reseting the message');\n    }).then(function (response) {\n      resetMessage();\n      if (!response.status || response === 0) {\n        status.innerHTML = response.message;\n        status.classList.add('error');\n\n        return;\n      }\n\n      status.innerHTML = response.message;\n      status.classList.add('success');\n\n      window.location.reload();\n    });\n  });\n\n  function resetMessage() {\n    status.innerHTML = '';\n    status.classList.remove('error', 'success');\n\n    authForm.querySelector('[name=\"submit\"]').value = 'Login';\n    authForm.querySelector('[name=\"submit\"]').disabled = false;\n  }\n});\n\n},{}]},{},[1]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","document","addEventListener","showAuthBtn","querySelector","authContainer","closeBtn","authForm","getElementById","status","resetMessage","innerHTML","classList","remove","value","disabled","add","this","parentElement","preventDefault","data","url","dataset","params","URLSearchParams","FormData","fetch","method","body","then","resolve","json","catch","error","alert","response","message","window","location","reload"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAE,mBAAmBC,SAASA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAkD,MAA1CK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,MAAaO,KAAK,mBAAmBF,EAAMG,EAAEX,EAAEG,GAAG,CAACS,QAAQ,IAAIb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAQ,IAAI,IAAIL,EAAE,mBAAmBD,SAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACa,EAAE,CAAC,SAAST,EAAQU,EAAOJ,gBAGxeK,SAASC,iBAAiB,mBAAoB,WAC5C,IAAIC,EAAcF,SAASG,cAAc,6BACrCC,EAAgBJ,SAASG,cAAc,sBACvCE,EAAWL,SAASG,cAAc,wBAClCG,EAAWN,SAASO,eAAe,sBACnCC,EAASF,EAASH,cAAc,2BAyDpC,SAASM,IACPD,EAAOE,UAAY,GACnBF,EAAOG,UAAUC,OAAO,QAAS,WAEjCN,EAASH,cAAc,mBAAmBU,MAAQ,QAClDP,EAASH,cAAc,mBAAmBW,UAAW,EA5DvDZ,EAAYD,iBAAiB,QAAS,WACpCG,EAAcO,UAAUI,IAAI,QAC5BC,KAAKC,cAAcN,UAAUI,IAAI,UAGnCV,EAASJ,iBAAiB,QAAS,WACjCG,EAAcO,UAAUC,OAAO,QAC/BV,EAAYe,cAAcN,UAAUC,OAAO,UAG7CN,EAASL,iBAAiB,SAAU,SAAUnB,GAC5CA,EAAEoC,iBAEF,IAAIC,EACIb,EAASH,cAAc,qBAAqBU,MADhDM,EAEQb,EAASH,cAAc,qBAAqBU,MAC/CP,EAASH,cAAc,0BAA0BU,MAG1D,IAAKM,IAAcA,EAGjB,OAFAX,EAAOE,UAAY,oBACnBF,EAAOG,UAAUI,IAAI,SAKnBK,EAAMd,EAASe,QAAQD,IACvBE,EAAS,IAAIC,gBAAgB,IAAIC,SAASlB,IAC9CA,EAASH,cAAc,mBAAmBU,MAAQ,eAClDP,EAASH,cAAc,mBAAmBW,UAAW,EAErDW,MAAML,EAAK,CACTM,OAAQ,OACRC,KAAML,IACLM,KAAK,SAAUC,GAChB,OAAOA,EAAQC,SACdC,MAAM,SAAUC,GACjBvB,IACAwB,MAAM,0BACLL,KAAK,SAAUM,GAEhB,OADAzB,IACKyB,EAAS1B,QAAuB,IAAb0B,GAOxB1B,EAAOE,UAAYwB,EAASC,QAC5B3B,EAAOG,UAAUI,IAAI,gBAErBqB,OAAOC,SAASC,WATd9B,EAAOE,UAAYwB,EAASC,aAC5B3B,EAAOG,UAAUI,IAAI,iBAqB3B,KAAK,GAAG,CAAC"}